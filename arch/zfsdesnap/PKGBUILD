# Maintainer: John Ramsden <johnramsden [at] riseup [dot] net>

pkgname=zfsdesnap
pkgver=0.1.1
pkgrel=1
pkgdesc="Tool to destroy all ZFS snapshots before a certain date, based off a configurable name and date format. Written in bourne shell."
arch=('any')
url="https://github.com/johnramsden/zfsdesnap"
license=('BSD' 'custom:BSD 3 clause')
depends=('zfs')
conflicts=('zfsdesnap-git')
source=("${pkgname}-${pkgver}.tar.gz::https://github.com/johnramsden/${pkgname}/archive/v${pkgver}.tar.gz")
md5sums=('b5f1069eef06feb4dc37c46a19779f65')

package() {
	cd "${srcdir}/${pkgname}-${pkgver}"

	install -d "${pkgdir}/usr/bin"
	install -d "${pkgdir}/usr/lib/systemd/system"
	install -d "${pkgdir}/usr/share/license/${pkgname}"
	install -m 755 "src/zfsdesnap" "${pkgdir}/usr/bin/zfsdesnap"
	install -m 644 etc/* "${pkgdir}/usr/lib/systemd/system"
	install -m 755 "LICENSE.md" "${pkgdir}/usr/share/license/${pkgname}/LISCENSE"
}
